\documentclass{article}\usepackage[]{graphicx}\usepackage[]{color}
% maxwidth is the original width if it is less than linewidth
% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%
\let\hlipl\hlkwb

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}
\usepackage[sc]{mathpazo}
\renewcommand{\sfdefault}{lmss}
\renewcommand{\ttdefault}{lmtt}
\usepackage[T1]{fontenc}
\usepackage{geometry}
\geometry{verbose,tmargin=2.5cm,bmargin=2.5cm,lmargin=2.5cm,rmargin=2.5cm}
\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}
\usepackage[unicode=true,pdfusetitle,
 bookmarks=true,bookmarksnumbered=true,bookmarksopen=true,bookmarksopenlevel=2,
 breaklinks=false,pdfborder={0 0 1},backref=false,colorlinks=false]
 {hyperref}
\hypersetup{
 pdfstartview={XYZ null null 1}}

\makeatletter
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% User specified LaTeX commands.
\renewcommand{\textfraction}{0.05}
\renewcommand{\topfraction}{0.8}
\renewcommand{\bottomfraction}{0.8}
\renewcommand{\floatpagefraction}{0.75}

\makeatother
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}








The results below are generated from an R script.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{#source("utilAD.R")}
\hlcom{#source("simulation.R")}
\hlcom{#Example 1}
\hlcom{#Generate a time series of ER graphs of length 12,}
\hlcom{#create graph anomaly at time point 6}
\hlstd{n} \hlkwb{<-} \hlnum{100}
\hlstd{glist} \hlkwb{<-} \hlkwd{list}\hlstd{()}
\hlkwa{for} \hlstd{(i} \hlkwa{in} \hlnum{1}\hlopt{:}\hlnum{5}\hlstd{) \{}
  \hlstd{glist[[i]]} \hlkwb{<-} \hlkwd{sample_gnp}\hlstd{(n,}\hlnum{.1}\hlstd{)}
  \hlstd{\}}
  \hlstd{glist[[}\hlnum{6}\hlstd{]]} \hlkwb{<-} \hlkwd{sample_gnp}\hlstd{(n,}\hlnum{.9}\hlstd{)}
  \hlstd{glist[[}\hlnum{7}\hlstd{]]} \hlkwb{<-} \hlkwd{sample_gnp}\hlstd{(n,}\hlnum{.1}\hlstd{)}
  \hlkwa{for} \hlstd{(i} \hlkwa{in} \hlnum{8}\hlopt{:}\hlnum{12}\hlstd{) \{}
    \hlstd{glist[[i]]} \hlkwb{<-} \hlkwd{sample_gnp}\hlstd{(n,}\hlnum{.1}\hlstd{)}
  \hlstd{\}}
\hlcom{# Do anomaly detection with OMNI, provide the quantitative control chart for GraphAD and VertexAD}
\hlstd{result.OMNI}\hlkwb{<-} \hlkwd{qccAD}\hlstd{(glist,} \hlkwc{l}\hlstd{=}\hlnum{4}\hlstd{,}\hlkwc{d}\hlstd{=}\hlnum{1}\hlstd{,}\hlkwc{dsvd}\hlstd{=}\hlkwa{NULL}\hlstd{,}\hlkwc{method}\hlstd{=}\hlstr{"OMNI"}\hlstd{,}
 \hlkwc{diag.augment} \hlstd{=} \hlnum{TRUE}\hlstd{,} \hlkwc{approx}\hlstd{=}\hlnum{FALSE}\hlstd{,} \hlkwc{par}\hlstd{=}\hlnum{FALSE}\hlstd{,} \hlkwc{numpar}\hlstd{=}\hlnum{2}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning: 'switch' is deprecated.\\\#\# Use 'strip.position' instead.\\\#\# See help("{}Deprecated"{})}}\end{kframe}

{\centering \includegraphics[width=.6\linewidth]{figure/example-Rnwauto-report-1} 

}




{\centering \includegraphics[width=.6\linewidth]{figure/example-Rnwauto-report-2} 

}


\begin{kframe}\begin{alltt}
\hlcom{#print the number of deviation for GraphAD, only positive ones are meaningful}
\hlkwd{print}\hlstd{(result.OMNI}\hlopt{$}\hlstd{GraphAD)}
\end{alltt}
\begin{verbatim}
##      Samples
## Group       [,1]
##     1  0.5524253
##     2 53.7757766
##     3  1.4484721
##     4 -1.4717813
##     5 -1.4676294
##     6 -0.7451977
##     7  0.2686479
##     8 -1.5741267
\end{verbatim}
\begin{alltt}
\hlcom{# Do anomaly detection with MASE}
\hlstd{result.MASE}\hlkwb{<-} \hlkwd{qccAD}\hlstd{(glist,} \hlkwc{l}\hlstd{=}\hlnum{4}\hlstd{,}\hlkwc{d}\hlstd{=}\hlnum{2}\hlstd{,}\hlkwc{dsvd}\hlstd{=}\hlnum{2}\hlstd{,}\hlkwc{method}\hlstd{=}\hlstr{"MASE"}\hlstd{,}
               \hlkwc{diag.augment} \hlstd{=} \hlnum{TRUE}\hlstd{,} \hlkwc{approx}\hlstd{=}\hlnum{FALSE}\hlstd{,} \hlkwc{par}\hlstd{=}\hlnum{FALSE}\hlstd{,} \hlkwc{numpar}\hlstd{=}\hlnum{2}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning: 'switch' is deprecated.\\\#\# Use 'strip.position' instead.\\\#\# See help("{}Deprecated"{})}}\end{kframe}

{\centering \includegraphics[width=.6\linewidth]{figure/example-Rnwauto-report-3} 

}




{\centering \includegraphics[width=.6\linewidth]{figure/example-Rnwauto-report-4} 

}


\begin{kframe}\begin{alltt}
\hlcom{#print the number of deviation for GraphAD, only positive ones are meaningful}
\hlkwd{print}\hlstd{(result.MASE}\hlopt{$}\hlstd{GraphAD)}
\end{alltt}
\begin{verbatim}
##      Samples
## Group        [,1]
##     1 -1.09610988
##     2  7.64596167
##     3  1.04816905
##     4 -1.45843192
##     5 -1.18478469
##     6 -0.81322605
##     7 -0.04974224
##     8 -0.94957297
\end{verbatim}
\begin{alltt}
\hlcom{#Example 2}
\hlcom{# Sample a time series of RDPG graph (length tmax > 17) with same 1-1 matched vertices unweighted}
\hlcom{# hollow symmetric undirected graphs, the latent positions i.i.d uniform.}
\hlcom{# Some vertices in 16-th and 17-th graphs are given perturbations so there exists anomalies at 16:17.}
\hlstd{n} \hlkwb{<-} \hlnum{100} \hlcom{#number of vertices}
\hlstd{nperturb} \hlkwb{<-} \hlnum{20} \hlcom{#number of perturbed vertices}
\hlstd{cperturb} \hlkwb{<-} \hlnum{.12} \hlcom{#number of perturbation, larger cperturb means more obvious anomalies.}
\hlstd{rmin} \hlkwb{<-} \hlnum{.2} \hlcom{# parameter for uniform[rmin, rmax].}
\hlstd{rmax} \hlkwb{<-} \hlnum{.8} \hlcom{# parameter for uniform[rmin, rmax].}
\hlstd{tmax} \hlkwb{<-} \hlnum{22} \hlcom{# number of graphs must be greater than 17.}
\hlcom{#Generate data or load the data you want}
\hlstd{glist} \hlkwb{<-} \hlkwd{generate.tsg}\hlstd{(n, nperturb,} \hlkwc{cperturb}\hlstd{=}\hlkwa{NULL}\hlstd{, rmin, rmax, tmax)}\hlopt{$}\hlstd{glist}

\hlcom{#Do anomaly detection with OMNI in parallel}
\hlstd{result.OMNI} \hlkwb{<-} \hlkwd{qccAD}\hlstd{(glist,} \hlkwc{l}\hlstd{=}\hlnum{11}\hlstd{,}\hlkwc{d}\hlstd{=}\hlnum{1}\hlstd{,}\hlkwc{dsvd}\hlstd{=}\hlkwa{NULL}\hlstd{,}\hlkwc{method}\hlstd{=}\hlstr{"OMNI"}\hlstd{,}
                     \hlkwc{diag.augment} \hlstd{=} \hlnum{TRUE}\hlstd{,} \hlkwc{approx}\hlstd{=}\hlnum{FALSE}\hlstd{,} \hlkwc{par}\hlstd{=}\hlnum{TRUE}\hlstd{,} \hlkwc{numpar}\hlstd{=}\hlnum{2}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning: 'switch' is deprecated.\\\#\# Use 'strip.position' instead.\\\#\# See help("{}Deprecated"{})}}\end{kframe}

{\centering \includegraphics[width=.6\linewidth]{figure/example-Rnwauto-report-5} 

}




{\centering \includegraphics[width=.6\linewidth]{figure/example-Rnwauto-report-6} 

}


\begin{kframe}\begin{alltt}
\hlcom{#print the number of deviation for GraphAD, only positive ones are meaningful}
\hlkwd{print}\hlstd{(result.OMNI}\hlopt{$}\hlstd{GraphAD)}
\end{alltt}
\begin{verbatim}
##      Samples
## Group       [,1]
##    1  -0.9260126
##    2  -0.7771847
##    3   1.1667894
##    4   2.2546748
##    5  12.4817008
##    6  15.5529279
##    7   1.4432577
##    8  -1.5661622
##    9  -0.6726323
##    10 -0.4290760
##    11 -0.5030972
\end{verbatim}
\begin{alltt}
\hlcom{# Do anomaly detection with MASE in parallel}
\hlstd{result.MASE}\hlkwb{<-} \hlkwd{qccAD}\hlstd{(glist,} \hlkwc{l}\hlstd{=}\hlnum{11}\hlstd{,}\hlkwc{d}\hlstd{=}\hlnum{1}\hlstd{,}\hlkwc{dsvd}\hlstd{=}\hlnum{2}\hlstd{,}\hlkwc{method}\hlstd{=}\hlstr{"MASE"}\hlstd{,}
                    \hlkwc{diag.augment} \hlstd{=} \hlnum{TRUE}\hlstd{,} \hlkwc{approx}\hlstd{=}\hlnum{FALSE}\hlstd{,} \hlkwc{par}\hlstd{=}\hlnum{TRUE}\hlstd{,} \hlkwc{numpar}\hlstd{=}\hlnum{2}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning: 'switch' is deprecated.\\\#\# Use 'strip.position' instead.\\\#\# See help("{}Deprecated"{})}}\end{kframe}

{\centering \includegraphics[width=.6\linewidth]{figure/example-Rnwauto-report-7} 

}




{\centering \includegraphics[width=.6\linewidth]{figure/example-Rnwauto-report-8} 

}


\begin{kframe}\begin{alltt}
\hlcom{#print the number of deviation for GraphAD, only positive ones are meaningful}
\hlkwd{print}\hlstd{(result.MASE}\hlopt{$}\hlstd{GraphAD)}
\end{alltt}
\begin{verbatim}
##      Samples
## Group       [,1]
##    1  -1.0741138
##    2   0.6851632
##    3   0.6762691
##    4   1.3225986
##    5   2.6942888
##    6   8.0595982
##    7   0.8002741
##    8  -0.7659120
##    9  -1.5011044
##    10 -1.0487262
##    11  1.2654026
\end{verbatim}
\begin{alltt}
\hlcom{#Example 3}
\hlcom{#five of ER tsg with change point at t=6 and five at t=8.}
\hlstd{n} \hlkwb{<-} \hlnum{100}
\hlstd{dat} \hlkwb{<-} \hlkwd{matrix}\hlstd{(}\hlnum{0}\hlstd{,} \hlnum{10}\hlstd{,} \hlnum{8}\hlstd{)}
\hlkwa{for} \hlstd{(j} \hlkwa{in} \hlnum{1}\hlopt{:}\hlnum{5}\hlstd{) \{}
  \hlstd{glist} \hlkwb{<-} \hlkwd{list}\hlstd{()}
  \hlkwa{for} \hlstd{(i} \hlkwa{in} \hlnum{1}\hlopt{:}\hlnum{5}\hlstd{) \{}
    \hlstd{glist[[i]]} \hlkwb{<-} \hlkwd{sample_gnp}\hlstd{(n,}\hlnum{.1}\hlstd{)}
  \hlstd{\}}
  \hlstd{glist[[}\hlnum{6}\hlstd{]]} \hlkwb{<-} \hlkwd{sample_gnp}\hlstd{(n,}\hlnum{.9}\hlstd{)}
  \hlkwa{for} \hlstd{(i} \hlkwa{in} \hlnum{7}\hlopt{:}\hlnum{12}\hlstd{) \{}
    \hlstd{glist[[i]]} \hlkwb{<-} \hlkwd{sample_gnp}\hlstd{(n,}\hlnum{.1}\hlstd{)}
  \hlstd{\}}
  \hlcom{# Do anomaly detection with OMNI, provide the quantitative control chart for GraphAD and VertexAD}
  \hlstd{result.OMNI}\hlkwb{<-} \hlkwd{qccAD}\hlstd{(glist,} \hlkwc{l}\hlstd{=}\hlnum{4}\hlstd{,}\hlkwc{d}\hlstd{=}\hlnum{1}\hlstd{,}\hlkwc{dsvd}\hlstd{=}\hlkwa{NULL}\hlstd{,}\hlkwc{method}\hlstd{=}\hlstr{"OMNI"}\hlstd{,}
                      \hlkwc{diag.augment} \hlstd{=} \hlnum{TRUE}\hlstd{,} \hlkwc{approx}\hlstd{=}\hlnum{FALSE}\hlstd{,} \hlkwc{par}\hlstd{=}\hlnum{FALSE}\hlstd{,} \hlkwc{numpar}\hlstd{=}\hlnum{2}\hlstd{,} \hlkwc{plot.figure} \hlstd{=} \hlnum{FALSE}\hlstd{)}
  \hlstd{dat[j,]} \hlkwb{<-} \hlstd{result.OMNI}\hlopt{$}\hlstd{GraphAD}
\hlstd{\}}
\hlkwa{for} \hlstd{(j} \hlkwa{in} \hlnum{6}\hlopt{:}\hlnum{10}\hlstd{) \{}
  \hlstd{glist} \hlkwb{<-} \hlkwd{list}\hlstd{()}
  \hlkwa{for} \hlstd{(i} \hlkwa{in} \hlnum{1}\hlopt{:}\hlnum{7}\hlstd{) \{}
    \hlstd{glist[[i]]} \hlkwb{<-} \hlkwd{sample_gnp}\hlstd{(n,}\hlnum{.1}\hlstd{)}
  \hlstd{\}}
  \hlstd{glist[[}\hlnum{8}\hlstd{]]} \hlkwb{<-} \hlkwd{sample_gnp}\hlstd{(n,}\hlnum{.9}\hlstd{)}
  \hlkwa{for} \hlstd{(i} \hlkwa{in} \hlnum{9}\hlopt{:}\hlnum{12}\hlstd{) \{}
    \hlstd{glist[[i]]} \hlkwb{<-} \hlkwd{sample_gnp}\hlstd{(n,}\hlnum{.1}\hlstd{)}
  \hlstd{\}}
  \hlcom{# Do anomaly detection with OMNI, provide the quantitative control chart for GraphAD and VertexAD}
  \hlstd{result.OMNI}\hlkwb{<-} \hlkwd{qccAD}\hlstd{(glist,} \hlkwc{l}\hlstd{=}\hlnum{4}\hlstd{,}\hlkwc{d}\hlstd{=}\hlnum{1}\hlstd{,}\hlkwc{dsvd}\hlstd{=}\hlkwa{NULL}\hlstd{,}\hlkwc{method}\hlstd{=}\hlstr{"OMNI"}\hlstd{,}
                      \hlkwc{diag.augment} \hlstd{=} \hlnum{TRUE}\hlstd{,} \hlkwc{approx}\hlstd{=}\hlnum{FALSE}\hlstd{,} \hlkwc{par}\hlstd{=}\hlnum{FALSE}\hlstd{,} \hlkwc{numpar}\hlstd{=}\hlnum{2}\hlstd{,} \hlkwc{plot.figure} \hlstd{=} \hlnum{FALSE}\hlstd{)}
  \hlstd{dat[j,]} \hlkwb{<-} \hlstd{result.OMNI}\hlopt{$}\hlstd{GraphAD}
\hlstd{\}}
\hlstd{df} \hlkwb{<-} \hlkwd{data.frame}\hlstd{(dat,}\hlkwc{class}\hlstd{=}\hlkwd{factor}\hlstd{(}\hlkwd{c}\hlstd{(}\hlkwd{rep}\hlstd{(}\hlstr{"t6"}\hlstd{,}\hlnum{5}\hlstd{),}\hlkwd{rep}\hlstd{(}\hlstr{"t8"}\hlstd{,}\hlnum{5}\hlstd{))))}
\hlstd{pca_res} \hlkwb{<-} \hlkwd{prcomp}\hlstd{(dat,} \hlkwc{scale.} \hlstd{=} \hlnum{TRUE}\hlstd{)}
\hlkwd{library}\hlstd{(ggfortify)}
\hlkwd{autoplot}\hlstd{(pca_res)}
\end{alltt}
\end{kframe}

{\centering \includegraphics[width=.6\linewidth]{figure/example-Rnwauto-report-9} 

}


\begin{kframe}\begin{alltt}
\hlkwd{autoplot}\hlstd{(pca_res,} \hlkwc{data} \hlstd{= df,}\hlkwc{colour}\hlstd{=}\hlstr{"class"}\hlstd{)}
\end{alltt}
\end{kframe}

{\centering \includegraphics[width=.6\linewidth]{figure/example-Rnwauto-report-10} 

}



\end{knitrout}

The R session information (including the OS info, R version and all
packages used):

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlkwd{sessionInfo}\hlstd{()}
\end{alltt}
\begin{verbatim}
## R version 3.6.1 (2019-07-05)
## Platform: x86_64-apple-darwin15.6.0 (64-bit)
## Running under: macOS Sierra 10.12.3
## 
## Matrix products: default
## BLAS:   /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] parallel  stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] AnomalyDetection_0.1.0 rARPACK_0.11-0         igraph_1.2.4.1        
##  [4] dplyr_0.8.3            latex2exp_0.4.0        gtools_3.8.1          
##  [7] irlba_2.3.3            Matrix_1.2-17          doParallel_1.0.15     
## [10] iterators_1.0.12       ggfortify_0.4.10       ggplot2_3.2.1         
## [13] qcc_2.7                foreach_1.4.7          knitr_1.24            
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_1.0.2       RSpectra_0.16-0  highr_0.8        pillar_1.4.2     compiler_3.6.1  
##  [6] tools_3.6.1      digest_0.6.20    evaluate_0.14    lattice_0.20-38  tibble_2.1.3    
## [11] lifecycle_0.1.0  gtable_0.3.0     pkgconfig_2.0.2  rlang_0.4.5      rstudioapi_0.10 
## [16] xfun_0.9         gridExtra_2.3    withr_2.1.2      stringr_1.4.0    vctrs_0.2.4     
## [21] grid_3.6.1       tidyselect_0.2.5 glue_1.3.1       R6_2.4.0         purrr_0.3.3     
## [26] tidyr_1.0.0      magrittr_1.5     scales_1.0.0     codetools_0.2-16 MASS_7.3-51.4   
## [31] assertthat_0.2.1 colorspace_1.4-1 labeling_0.3     stringi_1.4.3    lazyeval_0.2.2  
## [36] munsell_0.5.0    crayon_1.3.4
\end{verbatim}
\begin{alltt}
\hlkwd{Sys.time}\hlstd{()}
\end{alltt}
\begin{verbatim}
## [1] "2020-08-13 18:59:49 EDT"
\end{verbatim}
\end{kframe}
\end{knitrout}


\end{document}
